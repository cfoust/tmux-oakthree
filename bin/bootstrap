#!/usr/bin/env bash
#
# Keep attempting to switch to the right session.

SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
source "$SCRIPT_DIR"/../lib/oakthree.sh

_tmux set-hook -u after-new-session

# Take over the calling session and consider all of its windows our shells.
_tmux new-session -d -s "$OT_PROJECTS" \; \
  new-session -d -s "$OT_SHELLS" \;       \
  switch-client -t "$OT_SHELLS"
  # TODO figure out why centering automatically doesn't work
  #set-hook -g after-new-window "run-shell 'bash $SCRIPT_DIR/tmux/center'"
  #new-window -c "$path" \;                \
  #kill-window -t "$OT_SHELLS:^"

true
